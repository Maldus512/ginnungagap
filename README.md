# Ginnungagap

```
“Just as cold arose out of Niflheim, and all terrible things, so also all that looked toward Múspellheim became hot and glowing; but Ginnungagap was as mild as windless air [...]
```


# Questions

 - Empty loops with O2 seem to never end
 - The datasheet states that the bootrom copies the stage 2 bootloader to SRAM5; why does the official linker script starts RAM at the end of RAM5 (0x20041F00)?

## Answered

 - Why are there both GPIO_OE_SET and generic SET/CLEAR/XOR registers? See 2.1.2: "The SIO (Section 2.3.1), a single-cycle IO block attached directly to the cores' IO ports, does not support atomic
accesses at the bus level, although some individual registers (e.g. GPIO) have set/clear/xor aliases."
    Answer: https://forums.raspberrypi.com/viewtopic.php?p=2208927#p2208927


# Notes
 - See https://github.com/raspberrypi/pico-sdk/tree/master/src/rp2_common/pico_standard_link
 - `.text.nomefile` for the linker script
 - Decide if it's worth to use as for assembly files or to just keep using gcc for everything
 - See https://reverseengineering.stackexchange.com/questions/4230/why-i-can-not-directly-get-the-content-of-bss-section
  Apparently .bss isn't relevant towards the final binary, maybe gcc discards it automatically?

https://vanhunteradams.com/Pico/Bootloader/Boot_sequence.html
https://stackoverflow.com/questions/72468783/writing-and-loading-code-from-qspi-flash-memory-from-rp2040
https://docs.rs/crate/rp2040-boot2/0.2.1/source/src/boot2_w25x10cl.S

 - in the ld script you specify .section* to include possibly file-specific sections generated by special flags (i.e. .text.main)
 https://stackoverflow.com/questions/55450518/gcc-linker-script-difference-between-rodata-and-rodata

 - C structs are not guaranteed in their layout:
https://blog.feabhas.com/2019/01/peripheral-register-access-using-c-structs-part-1/

 - Linker script symbols https://sourceware.org/binutils/docs/ld/Source-Code-Reference.html

 - Be mindful of your linter configuration: even if everything is setup correctly clangd may use your system's headers, which are different from the target (i.e. pointer sizes)

 - Maybe the XIP setup can be simplified by calling bootrom functions; see https://github.com/carlosftm/RPi-Pico-Baremetal/blob/main/14_bootrom_func_data/README.md

 - Vector table @ B1-3 of the Cortex-M0+ datasheet
